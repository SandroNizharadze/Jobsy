{% load i18n %}

<!-- Job listings container -->
<div class="px-6">
  {% if not show_filters %}
    <!-- Premium+ Section Header (main page only) -->
    <h3 class="my-4 pt-2 text-gray-800 font-semibold border-b border-gray-100 pb-4 mb-5">
      <div class="flex items-center">
        <span class="mr-2 flex items-center justify-center w-7 h-7 bg-purple-500 rounded-full text-white">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="currentColor" viewBox="0 0 16 16">
            <path d="M9.669.864 8 0 6.331.864l-1.858.282-.842 1.68-1.337 1.32L2.6 6l-.306 1.854 1.337 1.32.842 1.68 1.858.282L8 12l1.669-.864 1.858-.282.842-1.68 1.337-1.32L13.4 6l.306-1.854-1.337-1.32-.842-1.68L9.669.864zm1.196 1.193.684 1.365 1.086 1.072L12.387 6l.248 1.506-1.086 1.072-.684 1.365-1.51.229L8 10.874l-1.355-.702-1.51-.229-.684-1.365-1.086-1.072L3.614 6l-.25-1.506 1.087-1.072.684-1.365 1.51-.229L8 1.126l1.356.702 1.509.229z"/>
            <path d="M4 11.794V16l4-1 4 1v-4.206l-2.018.306L8 13.126 6.018 12.1 4 11.794z"/>
          </svg>
        </span>
        პრემიუმ+ ვაკანსიები
      </div>
    </h3>
  {% endif %}
  
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
    {% if jobs %}
      <!-- First show Premium+ jobs -->
      {% for job in jobs %}
        {% if job.premium_level == 'premium_plus' %}
        <div class="mb-4">
          <a href="{% url 'job_detail' job.id %}" class="block h-full">
            <div class="bg-[#f9e090] rounded-3xl border-2 border-purple-500 p-6 h-full shadow-sm hover:shadow-md hover:-translate-y-1 transition-all duration-200 premium-plus-card">
              <div class="flex flex-col h-full">
                <div class="flex justify-between">
                  <div>
                    <h5 class="font-semibold text-gray-800 text-lg mb-1">{{ job.title }}</h5>
                    <p class="text-base mb-1">{{ job.company }}</p>
                  </div>
                  <div class="flex items-start">
                    <span class="bg-purple-500 text-white text-xs px-3 py-1 rounded-full mr-1">Premium+</span>
                    <span class="bg-gray-100 text-gray-800 text-xs px-3 py-1 rounded-full">
                      <i class="fas fa-map-marker-alt"></i> {% trans job.location|default:"თბილისი" %}
                    </span>
                  </div>
                </div>
          
                <div class="mt-2 mb-2">
                  <p class="text-gray-600 text-base">
                    <i class="fas fa-wallet mr-1"></i> {{ job.salary_min|default:"1500" }} - {{ job.salary_max|default:"2600" }} ₾ {% trans job.salary_type|default:"თვეში" %}
                  </p>
                </div>
          
                <div class="flex justify-between mt-auto">
                  <div>
                    <span class="bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded mr-1">{% trans job.job_preferences|default:"სრული განაკვეთი" %}</span>
                    <span class="bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded">{% trans job.experience|default:"პროფესიონალი" %}</span>
                  </div>
                  {% if job.employer and job.employer.company_logo %}
                  <img src="{{ job.employer.company_logo.url }}" alt="{{ job.company }}" class="w-10 h-10 rounded-full">
                  {% else %}
                  <img src="https://via.placeholder.com/40" alt="{{ job.company }}" class="w-10 h-10 rounded-full">
                  {% endif %}
                </div>
              </div>
            </div>
          </a>
        </div>
        {% endif %}
      {% endfor %}
      
      {% if not show_filters %}
      <!-- Premium Section Header (main page only) -->
      <div class="col-span-1 sm:col-span-2 md:col-span-3 lg:col-span-4">
        <h3 class="my-4 pt-2 text-gray-800 font-semibold border-b border-gray-100 pb-4 mb-5">
          <div class="flex items-center">
            <span class="mr-2 flex items-center justify-center w-7 h-7 bg-blue-500 rounded-full text-white">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="currentColor" viewBox="0 0 16 16">
                <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
              </svg>
            </span>
            პრემიუმ განცხადებები
          </div>
        </h3>
      </div>
      {% endif %}
      
      <!-- Then show Premium jobs -->
      {% for job in jobs %}
        {% if job.premium_level == 'premium' %}
        <div class="mb-4">
          <a href="{% url 'job_detail' job.id %}" class="block h-full">
            <div class="bg-white rounded-3xl border border-blue-500 p-6 h-full shadow-sm hover:shadow-md hover:-translate-y-1 transition-all duration-200">
              <div class="flex flex-col h-full">
                <div class="flex justify-between">
                  <div>
                    <h5 class="font-semibold text-gray-800 text-lg mb-1">{{ job.title }}</h5>
                    <p class="text-base mb-1">{{ job.company }}</p>
                  </div>
                  <div class="flex items-start">
                    <span class="bg-blue-500 text-white text-xs px-3 py-1 rounded-full mr-1">Premium</span>
                    <span class="bg-gray-100 text-gray-800 text-xs px-3 py-1 rounded-full">
                      <i class="fas fa-map-marker-alt"></i> {% trans job.location|default:"თბილისი" %}
                    </span>
                  </div>
                </div>
                
                <div class="mt-2 mb-2">
                  <p class="text-gray-600 text-base">
                    <i class="fas fa-wallet mr-1"></i> {{ job.salary_min|default:"1500" }} - {{ job.salary_max|default:"2600" }} ₾ {% trans job.salary_type|default:"თვეში" %}
                  </p>
                </div>
                
                <div class="flex justify-between mt-auto">
                  <div>
                    <span class="bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded mr-1">{% trans job.job_preferences|default:"სრული განაკვეთი" %}</span>
                    <span class="bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded">{% trans job.experience|default:"პროფესიონალი" %}</span>
                  </div>
                  {% if job.employer and job.employer.company_logo %}
                  <img src="{{ job.employer.company_logo.url }}" alt="{{ job.company }}" class="w-10 h-10 rounded-full">
                  {% else %}
                  <img src="https://via.placeholder.com/40" alt="{{ job.company }}" class="w-10 h-10 rounded-full">
                  {% endif %}
                </div>
              </div>
            </div>
          </a>
        </div>
        {% endif %}
      {% endfor %}
      
      <!-- Finally show Standard jobs -->
      {% for job in jobs %}
        {% if job.premium_level == 'standard' %}
        <div class="mb-4">
          <a href="{% url 'job_detail' job.id %}" class="block h-full">
            <div class="bg-white rounded-3xl border border-yellow-300 p-6 h-full shadow-sm hover:shadow-md hover:-translate-y-1 transition-all duration-200">
              <div class="flex flex-col h-full">
                <div class="flex justify-between">
                  <div>
                    <h5 class="font-semibold text-gray-800 text-lg mb-1">{{ job.title }}</h5>
                    <p class="text-base mb-1">{{ job.company }}</p>
                  </div>
                  <div class="flex items-start">
                    <span class="bg-gray-100 text-gray-800 text-xs px-3 py-1 rounded-full">
                      <i class="fas fa-map-marker-alt"></i> {% trans job.location|default:"თბილისი" %}
                    </span>
                  </div>
                </div>
                
                <div class="mt-2 mb-2">
                  <p class="text-gray-600 text-base">
                    <i class="fas fa-wallet mr-1"></i> {{ job.salary_min|default:"1500" }} - {{ job.salary_max|default:"2600" }} ₾ {% trans job.salary_type|default:"თვეში" %}
                  </p>
                </div>
                
                <div class="flex justify-between mt-auto">
                  <div>
                    <span class="bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded mr-1">{% trans job.job_preferences|default:"სრული განაკვეთი" %}</span>
                    <span class="bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded">{% trans job.experience|default:"პროფესიონალი" %}</span>
                  </div>
                  {% if job.employer and job.employer.company_logo %}
                  <img src="{{ job.employer.company_logo.url }}" alt="{{ job.company }}" class="w-10 h-10 rounded-full">
                  {% else %}
                  <img src="https://via.placeholder.com/40" alt="{{ job.company }}" class="w-10 h-10 rounded-full">
                  {% endif %}
                </div>
              </div>
            </div>
          </a>
        </div>
        {% endif %}
      {% endfor %}
    {% else %}
      <div class="col-span-1 sm:col-span-2 md:col-span-3 lg:col-span-4 text-center text-gray-500 py-12">
        <i class="fas fa-search text-5xl mb-4"></i>
        <h4 class="text-xl mb-2">ვაკანსიები ვერ მოიძებნა</h4>
        <p class="mb-4">შეცვალეთ ფილტრები უფრო მეტი შედეგის სანახავად</p>
        <a href="{% url 'job_list' %}?show_filters=1#filters" 
           class="inline-block bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors">
          ყველა ვაკანსია
        </a>
      </div>
    {% endif %}
  </div>
</div> 